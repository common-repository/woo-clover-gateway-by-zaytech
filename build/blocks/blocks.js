(()=>{"use strict";const e=window.React,t=window.wp.i18n,r=window.wc.wcBlocksRegistry,a=window.wp.htmlEntities,c=window.wc.wcSettings,o=window.wp.element,n=(0,c.getSetting)("woocci_zaytech_data",{}),s=(0,t.__)("Zaytech Clover Integration","woo-gutenberg-products-block"),l=(0,a.decodeEntities)(n.title)||s,m=e=>{const{eventRegistration:t,emitResponse:r}=e,{onPaymentSetup:c}=t;return(0,o.useEffect)((()=>{const e=c((async()=>{try{let e=await(async()=>new Promise(((e,t)=>{woocci_params.recaptcha_site_key?grecaptcha.ready((function(){try{grecaptcha.execute(woocci_params.recaptcha_site_key,{action:"createOrder"}).then((t=>{e(t)}))}catch(e){t(e.message)}})):e("")})))().then((e=>e)).catch((e=>{throw new Error(e)}));return{type:r.responseTypes.SUCCESS,meta:{paymentMethodData:{"soo-recaptcha-token":e}}}}catch(e){return{type:r.responseTypes.ERROR,message:e.message}}}));return()=>{e()}}),[r.responseTypes.ERROR,r.responseTypes.SUCCESS,c]),(0,a.decodeEntities)(n.description||"")},i=r=>{const{eventRegistration:a,emitResponse:c}=r,{onPaymentSetup:n}=a;return(0,o.useEffect)((()=>{window.woocci_gateway.mountElements();const e=n((async()=>{try{let e=await(async()=>await window.clover.createToken().then((e=>{if(!e.token)throw new Error((t=e).errors.CARD_NUMBER?t.errors.CARD_NUMBER:t.errors.CARD_DATE?t.errors.CARD_DATE:t.errors.CARD_CVV||t.errors.CARD_CVV?t.errors.CARD_CVV:t.errors.CARD_POSTAL_CODE?t.errors.CARD_POSTAL_CODE:"Double check your card details");var t;return e})))(),t=await(async()=>new Promise(((e,t)=>{woocci_params.recaptcha_site_key?grecaptcha.ready((function(){try{grecaptcha.execute(woocci_params.recaptcha_site_key,{action:"createOrder"}).then((t=>{e(t)}))}catch(e){t(e.message)}})):e("")})))().then((e=>e)).catch((e=>{throw new Error(e)}));return{type:c.responseTypes.SUCCESS,meta:{paymentMethodData:{"soo-recaptcha-token":t,"clover-source":e.token,"clover-card":JSON.stringify(e.card)}}}}catch(e){return{type:c.responseTypes.ERROR,message:e.message}}}));return()=>{e()}}),[c.responseTypes.ERROR,c.responseTypes.SUCCESS,n]),(0,e.createElement)("div",null,(0,e.createElement)("fieldset",{id:"wc-woocci_zaytech-cc-form",className:"wc-credit-card-form wc-payment-form"},(0,e.createElement)("input",{type:"hidden",value:"use_inline_form"}),(0,e.createElement)("div",{className:"form-row form-row-wide moo-no-margin-buttom"},(0,e.createElement)("label",{htmlFor:"clover-card-element"},(0,t.__)("Card Number","zaytech_woocci"),(0,e.createElement)("span",{className:"required"},"*")),(0,e.createElement)("div",{className:"clover-card-group"},(0,e.createElement)("div",{id:"clover-card-element",className:"wc-clover-elements-field"}))),(0,e.createElement)("div",{className:"form-row form-row-first moo-no-margin-buttom"},(0,e.createElement)("label",{htmlFor:"clover-exp-element"},(0,t.__)("Expiry Date","zaytech_woocci"),(0,e.createElement)("span",{className:"required"},"*")),(0,e.createElement)("div",{id:"clover-exp-element",className:"wc-clover-elements-field"})),(0,e.createElement)("div",{className:"form-row form-row-last moo-no-margin-buttom"},(0,e.createElement)("label",{htmlFor:"clover-cvc-element"},(0,t.__)("Card Code (CVC)","zaytech_woocci"),(0,e.createElement)("span",{className:"required"},"*")),(0,e.createElement)("div",{id:"clover-cvc-element",className:"wc-clover-elements-field"})),(()=>{if(woocci_params.show_street_address&&"1"===woocci_params.show_street_address)return(0,e.createElement)("div",{className:"form-row form-row-wide moo-no-margin-buttom"},(0,e.createElement)("label",{htmlFor:"clover-address-element"},(0,t.__)("Street Address","zaytech_woocci"),(0,e.createElement)("span",{className:"required"},"*")),(0,e.createElement)("div",{id:"clover-address-element",className:"wc-clover-elements-field"}))})(),(0,e.createElement)("div",{className:"form-row form-row-wide moo-no-margin-buttom"},(0,e.createElement)("label",{htmlFor:"clover-zip-element"},(0,t.__)("Zip code","zaytech_woocci"),(0,e.createElement)("span",{className:"required"},"*")),(0,e.createElement)("div",{id:"clover-zip-element",className:"wc-clover-elements-field"})),(0,e.createElement)("div",{className:"clear"}),(0,e.createElement)("div",{className:"clover-errors",role:"alert"}),(0,e.createElement)("div",{className:"clover-footer"}),(0,e.createElement)("br",null),(0,e.createElement)("div",{className:"clear"})))},d=t=>{const{PaymentMethodLabel:r}=t.components;return(0,e.createElement)(r,{text:l})},w={name:"woocci_zaytech",label:(0,e.createElement)(d,null),content:(0,e.createElement)(i,null),edit:(0,e.createElement)(i,null),canMakePayment:()=>!0,ariaLabel:l,supports:{features:n.supports}},p={name:"woocci_zaytech",label:(0,e.createElement)(d,null),content:(0,e.createElement)(m,null),edit:(0,e.createElement)(m,null),canMakePayment:()=>!0,ariaLabel:l,supports:{features:n.supports}};"undefined"!=typeof woocci_params&&("1"!==woocci_params.inline_form?(0,r.registerPaymentMethod)(p):(0,r.registerPaymentMethod)(w))})();